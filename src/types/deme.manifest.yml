id: deme

properties:
  capacity:
    type:     Integer
    default:  100
    description: >
      The maximum number of individuals that may exist within this deme at
      any given time.

  offspring:
    type:     Integer
    default:  :capacity
    description: >
      The number of offspring that are produced at each generation.

composer: |
  println("- building deme.")

  s["species"] = Dict{Any, Any}(s["species"])
  s["breeder"] = Dict{Any, Any}(s["breeder"])

  println("- about to compose species: $(typeof(s["species"]))")
  s["species"] = compose_as(s["species"], Base.get(s["species"], "type", "species"))
  s["breeder"]["species"] = s["species"]

  println("-- building breeder.")
  s["breeder"] = compose_as(s["breeder"], s["breeder"]["type"])
  s["capacity"] = Base.get(s, "capacity", 100)
  s["offspring"] = Base.get(s, "offspring", s["capacity"])

  Deme{ind_type(s["species"])}(s["capacity"], s["breeder"], s["species"], s["offspring"])
